#!/usr/bin/env python
# coding: utf-8


import transformers
from transformers import pipeline

def predict(pergunta):
        
    print('entrou na predict')

    contextos = []
    contextos.append("A Covid-19 é uma infecção respiratória aguda causada pelo coronavírus SARS-CoV-2, potencialmente grave, de elevada transmissibilidade e de distribuição global. O SARS-CoV-2 é um betacoronavírus descoberto em amostras de lavado broncoalveolar obtidas de pacientes com pneumonia de causa desconhecida na cidade de Wuhan, província de Hubei, China, em dezembro de 2019. Pertence ao subgênero Sarbecovírus da família Coronaviridae e é o sétimo coronavírus conhecido a infectar seres humanos. Os coronavírus são uma grande família de vírus comuns em muitas espécies diferentes de animais, incluindo o homem, camelos, gado, gatos e morcegos. Raramente os coronavírus de animais podem infectar pessoas e depois se espalhar entre seres humanos como já ocorreu com o MERS-CoV e o SARS-CoV-2. Até o momento, não foi definido o reservatório silvestre do SARS-CoV-2. A infecção pelo SARS-CoV-2 pode variar de casos assintomáticos e manifestações clínicas leves, até quadros moderados, graves e críticos, sendo necessária atenção especial aos sinais e sintomas que indicam piora do quadro clínico que exijam a hospitalização do paciente. O caso assintomático é caracterizado por teste laboratorial positivo para covid-19 e ausência de sintomas. Caso leve: caracterizado a partir da presença de sintomas não específicos, como tosse, dor de garganta ou coriza, seguido ou não de anosmia, ageusia, diarreia, dor abdominal, febre, calafrios, mialgia, fadiga e/ou cefaleia. No caso moderado, os sintomas mais frequentes podem incluir desde sinais leves da doença, como tosse persistente e febre persistente diária, até sinais de piora progressiva de outro sintoma relacionado à covid-19 (adinamia, prostração, hiporexia, diarreia), além da presença de pneumonia sem sinais ou sintomas de gravidade. No caso grave, ocorre a Síndrome Respiratória Aguda Grave (Síndrome Gripal que apresente dispneia/desconforto respiratório ou pressão persistente no tórax ou saturação de oxigênio menor que 95% em ar ambiente ou coloração azulada de lábios ou rosto). Para crianças, os principais sintomas incluem taquipneia (maior ou igual a 70 rpm para menores de 1 ano e maior ou igual a 50 rpm para crianças maiores que 1 ano), hipoxemia, desconforto respiratório, alteração da consciência, desidratação, dificuldade para se alimentar, lesão miocárdica, elevação de enzimas hepáticas, disfunção da coagulação, rabdomiólise, cianose central ou SpO2 <90-92% em repouso e ar ambiente, letargia, convulsões, dificuldade de alimentação/recusa alimentar. No caso crítico, os principais sintomas são sepse, síndrome do desconforto respiratório agudo, síndrome do desconforto respiratório agudo, insuficiência respiratória grave, disfunção de múltiplos órgãos, pneumonia grave, necessidade de suporte respiratório e internações em unidades de terapia intensiva. Embora a maioria das pessoas com covid-19 desenvolvam sintomas leves (40%) ou moderados (40%), aproximadamente 15% podem desenvolver sintomas graves que requerem suporte de oxigênio e, cerca de 5% podem apresentar a forma crítica da doença, com complicações como falência respiratória, sepse e choque séptico, tromboembolismo e/ou falência múltipla de órgãos, incluindo lesão hepática ou cardíaca aguda e requerem cuidados intensivos. A covid-19 pode estar frequentemente associada a manifestações mentais e neurológicas10, incluindo delírio ou encefalopatia, agitação, acidente vascular cerebral, meningoencefalite, olfato ou paladar prejudicados, ansiedade, depressão e distúrbios de sono. Em muitos casos, manifestações neurológicas foram relatadas mesmo em pacientes sem sintomas respiratórios. A transmissão acontece de uma pessoa doente para outra ou por contato próximo por meio de: Toque do aperto de mão contaminadas; Gotículas de saliva; Espirro; Tosse; Catarro; Objetos ou superfícies contaminadas, como celulares, mesas, talheres, maçanetas, brinquedos, teclados de computador etc. O quadro clínico inicial da doença é caracterizado como Síndrome Gripal (SG). O diagnóstico clínico pode ser feito por investigação clínico-epidemiológica, anamnese e exame físico adequado do paciente, caso este apresente sinais e sintomas característicos da covid-19. Deve-se considerar o histórico de contato próximo ou domiciliar nos 14 dias anteriores ao aparecimento dos sinais e sintomas com pessoas já confirmadas para covid-19. Também se deve suspeitar de casos clínicos típicos sem vínculo epidemiológico claramente identificável. Essas informações devem ser registradas no prontuário do paciente para eventual investigação epidemiológica. As características clínicas não são específicas e podem ser similares àquelas causadas por outros vírus respiratórios, que também ocorrem sob a forma de surtos e, eventualmente, circulam ao mesmo tempo, tais como influenza, parainfluenza, rinovírus, vírus sincicial respiratório, adenovírus, outros coronavírus, entre outros. Diante da emergência ocasionada pelo coronavírus SARS-CoV-2, o reconhecimento da pandemia pela OMS e a declaração de Emergência de Saúde Pública de Importância Nacional (ESPIN), o Ministério da Saúde tem estabelecido sistematicamente medidas para resposta e enfrentamento da covid-19. Entre as medidas indicadas pelo MS, estão as não farmacológicas, como distanciamento social, etiqueta respiratória e de higienização das mãos, uso de máscaras, limpeza e desinfeção de ambientes, isolamento de casos suspeitos e confirmados e quarentena dos contatos dos casos de covid-19, conforme orientações médicas. Ademais, o MS recomenda ainda a vacinação contra a covid-19 dos grupos prioritários conforme o Plano Nacional de Operacionalização da Vacinação. Estas medidas devem ser utilizadas de forma integrada, a fim de controlar a transmissão do SARSCoV-2, permitindo também a retomada gradual das atividades desenvolvidas pelos vários setores e o retorno seguro do convívio social. Limitar o contato próximo entre pessoas infectadas e outras pessoas é importante para reduzir as chances de transmissão do SARS-CoV-2. Principalmente durante a pandemia, devem ser adotados procedimentos que permitam reduzir a interação entre as pessoas com objetivo de diminuir a velocidade de transmissão do vírus. Trata-se de uma estratégia importante quando há indivíduos já infectados, mas ainda assintomáticos ou oligossintomáticos, que não se sabem portadores da doença e não estão em isolamento. Além disso, recomenda-se a manutenção de uma distância física mínima de pelo menos 1 metro de outras pessoas, especialmente daquelas com sintomas respiratórios e um grande número de pessoas (aglomerações) tanto ao ar livre quanto em ambientes fechados. A higienização das mãos é a medida isolada mais efetiva na redução da disseminação de doenças de transmissão respiratória. As evidências atuais indicam que o vírus causador da covid-19 é transmitido por meio de gotículas respiratórias ou por contato. A transmissão por contato ocorre quando as mãos contaminadas tocam a mucosa da boca, do nariz ou dos olhos. Uma das formas mais importantes de prevenir a disseminação do SARS-CoV-2 é a etiqueta respiratória, a qual consiste num conjunto de medidas que devem ser adotadas para evitar e/ ou reduzir a disseminação de pequenas gotículas oriundas do aparelho respiratório, buscando evitar possível contaminação de outras pessoas que estão em um mesmo ambiente. O uso de máscara facial, incluindo as de tecido, é fortemente recomendado para toda a população em ambientes coletivos, em especial no transporte público e em eventos e reuniões, como forma de proteção individual, reduzindo o risco potencial de exposição do vírus especialmente de indivíduos assintomáticos.")
    
    '''
    contextos.append("A Covid-19 é uma infecção respiratória aguda causada pelo coronavírus SARS-CoV-2, potencialmente grave, de elevada transmissibilidade e de distribuição global. O SARS-CoV-2 é um betacoronavírus descoberto em amostras de lavado broncoalveolar obtidas de pacientes com pneumonia de causa desconhecida na cidade de Wuhan, província de Hubei, China, em dezembro de 2019. Pertence ao subgênero Sarbecovírus da família Coronaviridae e é o sétimo coronavírus conhecido a infectar seres humanos. Os coronavírus são uma grande família de vírus comuns em muitas espécies diferentes de animais, incluindo o homem, camelos, gado, gatos e morcegos. Raramente os coronavírus de animais podem infectar pessoas e depois se espalhar entre seres humanos como já ocorreu com o MERS-CoV e o SARS-CoV-2. Até o momento, não foi definido o reservatório silvestre do SARS-CoV-2.")
    contextos.append("A infecção pelo SARS-CoV-2 pode variar de casos assintomáticos e manifestações clínicas leves, até quadros moderados, graves e críticos, sendo necessária atenção especial aos sinais e sintomas que indicam piora do quadro clínico que exijam a hospitalização do paciente. O caso assintomático é caracterizado por teste laboratorial positivo para covid-19 e ausência de sintomas. Caso leve: caracterizado a partir da presença de sintomas não específicos, como tosse, dor de garganta ou coriza, seguido ou não de anosmia, ageusia, diarreia, dor abdominal, febre, calafrios, mialgia, fadiga e/ou cefaleia. No caso moderado, os sintomas mais frequentes podem incluir desde sinais leves da doença, como tosse persistente e febre persistente diária, até sinais de piora progressiva de outro sintoma relacionado à covid-19 (adinamia, prostração, hiporexia, diarreia), além da presença de pneumonia sem sinais ou sintomas de gravidade. No caso grave, ocorre a Síndrome Respiratória Aguda Grave (Síndrome Gripal que apresente dispneia/desconforto respiratório ou pressão persistente no tórax ou saturação de oxigênio menor que 95% em ar ambiente ou coloração azulada de lábios ou rosto). Para crianças, os principais sintomas incluem taquipneia (maior ou igual a 70 rpm para menores de 1 ano e maior ou igual a 50 rpm para crianças maiores que 1 ano), hipoxemia, desconforto respiratório, alteração da consciência, desidratação, dificuldade para se alimentar, lesão miocárdica, elevação de enzimas hepáticas, disfunção da coagulação, rabdomiólise, cianose central ou SpO2 <90-92% em repouso e ar ambiente, letargia, convulsões, dificuldade de alimentação/recusa alimentar. No caso crítico, os principais sintomas são sepse, síndrome do desconforto respiratório agudo, síndrome do desconforto respiratório agudo, insuficiência respiratória grave, disfunção de múltiplos órgãos, pneumonia grave, necessidade de suporte respiratório e internações em unidades de terapia intensiva.")
    contextos.append("Embora a maioria das pessoas com covid-19 desenvolvam sintomas leves (40%) ou moderados (40%), aproximadamente 15% podem desenvolver sintomas graves que requerem suporte de oxigênio e, cerca de 5% podem apresentar a forma crítica da doença, com complicações como falência respiratória, sepse e choque séptico, tromboembolismo e/ou falência múltipla de órgãos, incluindo lesão hepática ou cardíaca aguda e requerem cuidados intensivos. A covid-19 pode estar frequentemente associada a manifestações mentais e neurológicas10, incluindo delírio ou encefalopatia, agitação, acidente vascular cerebral, meningoencefalite, olfato ou paladar prejudicados, ansiedade, depressão e distúrbios de sono. Em muitos casos, manifestações neurológicas foram relatadas mesmo em pacientes sem sintomas respiratórios.")
    contextos.append("A transmissão acontece de uma pessoa doente para outra ou por contato próximo por meio de: Toque do aperto de mão contaminadas; Gotículas de saliva; Espirro; Tosse; Catarro; Objetos ou superfícies contaminadas, como celulares, mesas, talheres, maçanetas, brinquedos, teclados de computador etc.")
    contextos.append("O quadro clínico inicial da doença é caracterizado como Síndrome Gripal (SG). O diagnóstico clínico pode ser feito por investigação clínico-epidemiológica, anamnese e exame físico adequado do paciente, caso este apresente sinais e sintomas característicos da covid-19. Deve-se considerar o histórico de contato próximo ou domiciliar nos 14 dias anteriores ao aparecimento dos sinais e sintomas com pessoas já confirmadas para covid-19. Também se deve suspeitar de casos clínicos típicos sem vínculo epidemiológico claramente identificável. Essas informações devem ser registradas no prontuário do paciente para eventual investigação epidemiológica. As características clínicas não são específicas e podem ser similares àquelas causadas por outros vírus respiratórios, que também ocorrem sob a forma de surtos e, eventualmente, circulam ao mesmo tempo, tais como influenza, parainfluenza, rinovírus, vírus sincicial respiratório, adenovírus, outros coronavírus, entre outros.")
    contextos.append("Diante da emergência ocasionada pelo coronavírus SARS-CoV-2, o reconhecimento da pandemia pela OMS e a declaração de Emergência de Saúde Pública de Importância Nacional (ESPIN), o Ministério da Saúde tem estabelecido sistematicamente medidas para resposta e enfrentamento da covid-19. Entre as medidas indicadas pelo MS, estão as não farmacológicas, como distanciamento social, etiqueta respiratória e de higienização das mãos, uso de máscaras, limpeza e desinfeção de ambientes, isolamento de casos suspeitos e confirmados e quarentena dos contatos dos casos de covid-19, conforme orientações médicas. Ademais, o MS recomenda ainda a vacinação contra a covid-19 dos grupos prioritários conforme o Plano Nacional de Operacionalização da Vacinação. Estas medidas devem ser utilizadas de forma integrada, a fim de controlar a transmissão do SARSCoV-2, permitindo também a retomada gradual das atividades desenvolvidas pelos vários setores e o retorno seguro do convívio social." )
    contextos.append("Limitar o contato próximo entre pessoas infectadas e outras pessoas é importante para reduzir as chances de transmissão do SARS-CoV-2. Principalmente durante a pandemia, devem ser adotados procedimentos que permitam reduzir a interação entre as pessoas com objetivo de diminuir a velocidade de transmissão do vírus. Trata-se de uma estratégia importante quando há indivíduos já infectados, mas ainda assintomáticos ou oligossintomáticos, que não se sabem portadores da doença e não estão em isolamento. Além disso, recomenda-se a manutenção de uma distância física mínima de pelo menos 1 metro de outras pessoas, especialmente daquelas com sintomas respiratórios e um grande número de pessoas (aglomerações) tanto ao ar livre quanto em ambientes fechados.")
    contextos.append("A higienização das mãos é a medida isolada mais efetiva na redução da disseminação de doenças de transmissão respiratória. As evidências atuais indicam que o vírus causador da covid-19 é transmitido por meio de gotículas respiratórias ou por contato. A transmissão por contato ocorre quando as mãos contaminadas tocam a mucosa da boca, do nariz ou dos olhos.")
    contextos.append("Uma das formas mais importantes de prevenir a disseminação do SARS-CoV-2 é a etiqueta respiratória, a qual consiste num conjunto de medidas que devem ser adotadas para evitar e/ ou reduzir a disseminação de pequenas gotículas oriundas do aparelho respiratório, buscando evitar possível contaminação de outras pessoas que estão em um mesmo ambiente. O uso de máscara facial, incluindo as de tecido, é fortemente recomendado para toda a população em ambientes coletivos, em especial no transporte público e em eventos e reuniões, como forma de proteção individual, reduzindo o risco potencial de exposição do vírus especialmente de indivíduos assintomáticos.")
    '''
    #from transformers import AutoTokenizer, AutoModelForQuestionAnswering
  
    #tokenizer = AutoTokenizer.from_pretrained("pucpr/bioBERTpt-squad-v1.1-portuguese")

    #model = AutoModelForQuestionAnswering.from_pretrained("pucpr/bioBERTpt-squad-v1.1-portuguese"   
    
    
    model_name = 'pucpr/bioBERTpt-squad-v1.1-portuguese'
    nlp = pipeline("question-answering", model=model_name)

    result = nlp(question=pergunta, context=contextos[0])

    return result